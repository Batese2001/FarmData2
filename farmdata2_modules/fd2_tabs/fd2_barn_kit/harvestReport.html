<body>
    <h1>Harvest Report</h1>
    <br />
    <p>This page is a form for generating a harvest report</p>
    <br />
    <div id="harvRptVue" v-cloak>
        <label for="rptTitle">Title:</label>
        <input type="text" v-model="harvRptTitle" id="rptTitle" />

        <br /><br />

        <button class="btn btn-primary" @click="genHarvRpt">Generate Report</button>
        <div v-if="visible">
            <hr />
            <h1>
                {{ harvRptTitle == '' ? 'My Harvest Report' : harvRptTitle }}
            </h1>
            <br />

            <p v-if="table.length == 0">There are no matching records.</p>
            <table border="1" v-else>
                <tr>
                    <th v-for="header in headers">{{ header }}</th>
                </tr>
                <tr v-for="(log, index) in table">
                    <td>{{ log.date }}</td>
                    <td>{{ log.field }}</td>
                    <td>{{ log.crop }}</td>
                    <td>{{ log.yield }}</td>
                    <td>
                        <button type="button" @click="deleteHarvLog(index)">
                            Delete
                        </button>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <script>
        var harvRptVue = new Vue({
            el: '#harvRptVue',
            data: {
                harvRptTitle: 'My Harvest Report',
                visible: false,
                headers: ['Date', 'Field', 'Crop', 'Yield', 'Delete'],
                log: [
                    {
                        date: '05/02/2018',
                        field: 'Chuau-1',
                        crop: 'Kale',
                        yield: '10 Bunches',
                    },
                    {
                        date: '05/05/2018',
                        field: 'SQ7',
                        crop: 'Kale',
                        yield: '7 Bunches',
                    },
                    {
                        date: '07/10/2018',
                        field: 'Chuau-1',
                        crop: 'Kale',
                        yield: '12 Bunches',
                    },
                ],
                table: [],
            },
            methods: {
                genHarvRpt: function () {
                    if (this.table.length < this.log.length && this.visible) {
                        this.table.push(this.log[this.table.length]);
                    }
                    this.visible = true;
                },
                deleteHarvLog: function (nameIndex) {
                    this.table.splice(nameIndex, 1);
                },
            },
        });
        Vue.config.devtools = true;
    </script>
</body>
